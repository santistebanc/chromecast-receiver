<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>My Cast Sender</title>
  <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
</head>
<body>
  <button id="castBtn">Cast “It works!”</button>
  <div id="status">Status: idle</div>

  <script>
    const appId = 'YOUR_APP_ID'; // replace with your registered appId
    const namespace = 'urn:x-cast:com.example.myapp';

    function setStatus(msg) {
      document.getElementById('status').textContent = 'Status: ' + msg;
    }

    window['__onGCastApiAvailable'] = function(isAvailable) {
      if (isAvailable) {
        const context = cast.framework.CastContext.getInstance();
        context.setOptions({
          receiverApplicationId: appId,
          autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
        });
        setStatus('Cast SDK ready');
      }
    };

    document.getElementById('castBtn').addEventListener('click', async () => {
      try {
        const session = await cast.framework.CastContext.getInstance().requestSession();
        setStatus('Session started');
        session.sendMessage(namespace, "It works!");
      } catch (err) {
        setStatus('Error: ' + err);
      }
    });
  </script>
</body>
</html>
